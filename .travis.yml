language: rust
cache: cargo
sudo: true

rust:
  - stable
  - beta
  - nightly

os:
  - linux
  - osx

matrix:
  allow_failures:
    - rust: nightly

script:
  - rustc --version
  - cargo --version
  - cargo test --all --verbose
  - cargo doc --verbose

install:
  - if [ "${TRAVIS_OS_NAME}" = "linux" ]; then
      sudo apt-get install libegl1-mesa-dev libgles2-mesa-dev libsdl2-dev libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev gstreamer1.0-plugins-base;
    fi
  - if [ "${TRAVIS_OS_NAME}" = "osx" ]; then
      brew install sdl2 gstreamer gst-plugins-base;
    fi

branches:
  only:
    # This is where pull requests from "bors r+" are built.
    - staging
    # This is where pull requests from "bors try" are built.
    - trying
    # build pull requests.
    - master
